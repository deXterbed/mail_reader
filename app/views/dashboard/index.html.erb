<div class="dashboard-container">
  <div class="dashboard-header">
    <div class="dashboard-header-info">
      <h1 class="dashboard-title">Dashboard</h1>
      <span class="status-tag status-success">Authenticated</span>
    </div>
    <%= link_to 'Refresh Inbox', dashboard_path(refresh: true), class: 'button button-primary' %>
  </div>

  <% if flash[:alert] %>
    <div class="flash flash-alert"><%= flash[:alert] %></div>
  <% elsif flash[:notice] %>
    <div class="flash flash-notice"><%= flash[:notice] %></div>
  <% end %>

  <% if @emails.present? %>
    <h2>Latest Emails</h2>
    <ul class="email-list">
      <% @emails.each do |email| %>
        <li class="email-card">
          <div class="email-meta">
            <strong>Subject:</strong>
            <%= link_to email[:subject], email_path(email[:id]), class: 'email-link' %>
          </div>
          <div class="email-meta">
            <span><strong>From:</strong> <%= email[:from] %></span>
            <span>
              <strong>Received:</strong>
              <%= content_tag :span, email[:received_at], data: {
                    controller: 'localized-date',
                    localized_date_iso_value: email[:received_at_iso],
                    localized_date_fallback_value: email[:received_at]
                  } %>
            </span>
          </div>
          <div class="email-snippet">
            <p><%= email[:snippet] %></p>
            <%= link_to 'View details', email_path(email[:id]), class: 'email-link email-link-inline' %>
          </div>
        </li>
      <% end %>
    </ul>
  <% else %>
    <div class="empty-state">
      <p>No emails to display yet.</p>
    </div>
  <% end %>
</div>
